# GCC汇编
## 关于`CFLAGS+= -fomit-frame-pointer`的一点解析

`-fomit-frame-pointer`是GCC编译器的一个选项，用于优化代码。当启用这个选项时，编译器会尝试优化函数的调用，从而不使用框架指针，以节省寄存器，并且减少在函数调用期间保存和恢复栈帧的开销。框架指针是一种指向当前函数的栈帧的指针。栈帧是函数在堆栈中的一段内存，用于保存函数调用期间的局部变量、参数、返回地址和其他临时数据。

栈帧是在函数调用时为该函数在堆栈中分配的一段内存空间，用于保存函数调用期间需要保存的信息，如局部变量、参数、返回地址等。栈帧通常包含以下几个部分：

1. 函数参数：被调用函数的参数会被存放在栈帧中，以便函数内部可以访问它们。
2. 局部变量：函数内部声明的变量也会存放在栈帧中。
3. 返回地址：函数执行完成后需要返回到调用函数的位置，所以栈帧中也会保存函数返回的地址。
4. 栈指针：栈帧还包含一个指向当前栈顶位置的指针，用于在函数调用时动态调整栈的大小。

当使用 -fomit-frame-pointer 选项开启优化后，编译器会尝试减少或避免在函数中使用基于栈帧指针（EBP）的代码，而是直接使用栈指针（ESP）进行栈操作，以达到优化代码的目的。使用栈指针（ESP）进行栈操作可以达到优化代码的目的，主要是因为栈指针（ESP）的操作相对于栈帧指针（EBP）的操作更加高效。

```s
    pushl	%ebp
	movl	%esp, %ebp

    leave
```

